<!DOCTYPE html>
<html lang="ko" style="height:100%;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>물품보관함 관리 시스템</title>
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <script type="text/javascript" src="/static/js/jquery-3.4.1.min.js"></script>
    <style type="text/css">
    	.shawdow{
    		box-shadow: 2px 2px 2px 2px green
    	}
    </style>
    <script type="text/javascript">
    	$(document).ready(function(){
    		$('#Screen').css({'cursor':'url(/static/img/mouse.png), auto'});
    		$('button').css({'cursor':'url(/static/img/mouse.png), auto'});
    		
    		$('#imgBack').click(function(){
    			history.back();
    		});
    		
    		$("button[id^='btn']").click(function(e){
    			var regexp = /^[0-9]*$/
    			
    			var cmd = $(this).attr('id').split('btn')[1];
    			
    			if($('#whereInsert').val()==='0'){
        			if(regexp.test(cmd)){
						if(parseInt($('#pwdLen').text()) <= 7){
							$('#pwd').val($('#pwd').val() + cmd);
							$('#pwdLen').text(parseInt($('#pwdLen').text()) + 1);
						}else {
							alert('비밀번호는 8자까지 가능합니다');
						} 					    				
        			}else if(cmd === 'back'){
        				$('#pwd').val($('#pwd').val().slice(0,-1));
        				if(parseInt($('#pwdLen').text()) > 0 ){
	        				$('#pwdLen').text(parseInt($('#pwdLen').text()) - 1);
        				}
        			}else {
        				if ($('#pwd').val() === ''){
        					alert('비밀번호를 입력하세요');
        				}else {
        					$('#pwdChkForm').removeClass('sr-only');
        					$('#btnok').attr('disabled', true);
        					$('#whereInsert').val('1');
        				}
        			}
        			
    			}else {
        			if(regexp.test(cmd)){
						if(parseInt($('#pwdChkLen').text()) <= 7){
							$('#pwdChk').val($('#pwdChk').val() + cmd);
							$('#pwdChkLen').text(parseInt($('#pwdChkLen').text()) + 1);
						}else {
							alert('비밀번호는 8자까지 가능합니다');
						} 
        			}else if(cmd === 'back'){
        				$('#pwdChk').val($('#pwdChk').val().slice(0,-1));
        				if(parseInt($('#pwdChkLen').text()) > 0 ){
	        				$('#pwdChkLen').text(parseInt($('#pwdChkLen').text()) - 1);
        				}
        			}
    			}
    		});
    		
    		$('#reset').click(function(e){
    			e.preventDefault();
    			$('#pwdChk').val('');
    			$('#pwdChkLen').text('0');
    			if($('#whereInsert').val() === '1'){
    				$('#whereInsert').val('0');
    				$('#btnok').attr('disabled', false);
    				$('#pwdChkForm').addClass('sr-only');
    			}
    			$('#pwd').val('');
    			$('#pwdLen').text('0');
    		});
    		
    		$('#submit').click(function(e){
    			e.preventDefault();
    			if($('#whereInsert').val() === '0'){
    				alert('비밀번호를 입력하세요');
					return
    			}else{
    				if($('#pwdChk').val() == ''){
    					alert('비밀번호 확인을 입력하세요');
    					return
    				}
    				if($('#pwd').val() != $('#pwdChk').val()){
    					alert('비밀번호를 일치시키세요');
        				$("#reset").trigger("click");
    					return
    				}
    			}

    		});
    	});
    </script>
</head>
<body style="height: 100%; display: table; margin: 0 auto;">
    <div style="height: 100%;display: table-cell;vertical-align: middle;">
        <div style="height: 500px; width: 700px; background-color: white;" id="Screen">

            <div>
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" id="imgBack">
                        <img src="/static/img/backbutton.png" height="20px" width="30px" >
                    </a>
                    <a class="navbar-brand">비밀번호 입력</a>
                </nav>
            </div>

            <div style="margin-top: 30px; margin-bottom: 15px; width: 650px; margin-left: 25px;"> 
                <span class="badge badge-primary" style="font-size: 15px; margin-bottom: 2px;">진행도</span>
                <div class="progress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 45%"></div>
                </div>
            </div>

            <div class="row" style="margin-top: 40px; margin-left: 50px; margin-right: 40px;">
                <div class="col">
                    <div>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn1">1</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn2">2</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn3">3</button>
                    </div>
                    <br>
                    <div>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn4">4</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn5">5</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn6">6</button>
                    </div>
                    <br>
                    <div>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn7">7</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn8">8</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn9">9</button>
                    </div>
                    <br>
                    <div>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btn0">0</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btnback">back</button>
                        <button type="button" class="btn btn-secondary" style="width: 50px; height: 50px;" id="btnok">OK</button>
                    </div>
                </div>

                <div class="col">
                    <form action="#" method="POST" name="pwdfrm">{% csrf_token %}
                    	<input type="hidden" name="box_num" value="{{box_num}}">
                    	<input type="hidden" id="whereInsert" value="0">
                        <div class="form-group">
                            <label style="color: black;"><strong>비밀번호 입력(<label id="pwdLen">0</label>/8)</strong></label>
                            <input type="password" class="form-control" id="pwd" name="box_pwd" placeholder="비밀번호" disabled >
                        </div>
                        <div class="form-group sr-only" id="pwdChkForm">
                            <label style="color: black;"><strong>비밀번호 확인(<label id="pwdChkLen">0</label>/8)</strong></label>
                            <input type="password" class="form-control" id="pwdChk" placeholder="비밀번호 확인" disabled>
                        </div>
                        <div>
	                        <button class="btn btn-primary" id="reset">초기화</button>
	                        <button class="btn btn-primary" id="submit">입력 완료</button>
                        </div>
                    </form>
                </div>
            </div>


        </div>
    </div>
</body>
</html>